<!DOCTYPE html>
<html>
    <head>
        <script>
            

if (typeof jQuery == "undefined") {
  var scriptUrl =
    "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js";
  include(scriptUrl);
}

function loadDataHereDom(){
  window.trackingData();
  window.loadDatahereModel();
  console.log('data here loaded!!!');
}

window.onload =function(){
  loadDataHereDom();
}

window.isEdge = get_info_of_IE();
console.log(isEdge);

function get_info_of_IE() {
  var agent = navigator.userAgent.toLowerCase();
  if (agent.indexOf("edge") > -1) return true;
  return false;
}

function include(scriptUrl) {
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.open("GET", scriptUrl, false);

  xmlhttp.onreadystatechange = function() {
    if (xmlhttp.status == 200 && xmlhttp.readyState == 4) {
      eval(xmlhttp.responseText);
    }
  };

  xmlhttp.send();
}

var cssScript = document.createElement("link");
cssScript.rel = "stylesheet";
cssScript.href =
  "/static/datahere_welaaa_widget_0.0.4.css"; 
 // cssScript.href = "/datahere_widget_0.0.1.css";

document.getElementsByTagName("head")[0].appendChild(cssScript);

function trackingData() {
  var filter = "win16|win32|win64|mac";
  var hostFlag = true;

  if (navigator.platform) {
    if (0 > filter.indexOf(navigator.platform.toLowerCase())) {
      hostFlag = false; //모바일
    } else {
      hostFlag = true; //웹
    }
  }

  var pageName = ""; //main

  pageName = location.pathname;
  var trackingUrl = "https://welaaa.cloudhere.net/insert";
  var deleteUrl = "https://welaaa.cloudhere.net/delete";
  var member_id = "";
  member_id = getMemberId();
  var member_name = getName();
  var product_id = "";
  console.log(pageName);

  if (pageName.includes("/video/detail")) {
    console.log("video course"); //video

    course_id = location.pathname.split("/")[
      location.pathname.split("/").length - 1
    ];

    if (course_id != undefined) {
      localStorage.setItem("dh_content_id", course_id);
      url =
        trackingUrl +
        "?mode=ep_click&content_id=" +
        course_id +
        "&member_id=" +
        member_id;
      $.ajax({
        dataType: "json",
        url: url,
        timeout: 5000,
        type: "GET",
        success: function success(data) {
          //성공!
          alert('sucess')
        },
        error: function error(request, status, _error) {
          // 오류가 발생했을 때 호출된다.
          //console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
        }
      });
    }
  } else if (pageName.includes("/audio/detail")) {
    //audio
    audio_id = getSearchParameters().audioId;
    console.log("audio book");

    if (audio_id != undefined) {
      localStorage.setItem("dh_content_id", audio_id);
      url =
        trackingUrl +
        "?mode=ep_click&content_id=" +
        audio_id +
        "&member_id=" +
        member_id;
      $.ajax({
        dataType: "json",
        url: url,
        timeout: 5000,
        type: "GET",
        success: function success(data) {
          //성공!
        },
        error: function error(request, status, _error2) {
          // 오류가 발생했을 때 호출된다.
          //console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
        }
      });
    }
  }
}

function loadDatahereModel() {
  var scripts = document.getElementsByTagName("script");
  var swiperExist = false;

  for (var i = 0; i < scripts.length; i++) {
    if (scripts[i].src.indexOf("swiper") != -1) {
      swiperExist = true;
    }
  }

  if (!swiperExist) {
    var cssScript = document.createElement("link");
    cssScript.rel = "stylesheet";
    cssScript.href =
      "https://s3.ap-northeast-2.amazonaws.com/datahere.web/swiper.min.css";
    document.getElementsByTagName("head")[0].appendChild(cssScript);
  }

  var $data = $(".dataheretable"); //console.log($($data[0]).data("tracking-url"));

  var member_id = "";
  member_id = getMemberId();
  $.each($data, function(i, e) {
    widgetId = $(e).data("widget");
    apiUrl = $(e).data("api-url");
    widgetLocation = $(e).data("location");
    console.log("widgetLocation : " + widgetLocation);
    var content_id = "";

    if (localStorage.hasOwnProperty("dh_content_id")) {
      var content_id = localStorage.getItem("dh_content_id");

      if (!content_id) {
        content_id = "";
      } else {
        //alert(content_id);
      }
    } else {
      var content_id = "";
    }

    url =
      apiUrl +
      "?content_id=" +
      content_id +
      "&widget_id=" +
      widgetId +
      "&user_id=" +
      member_id;
    $.ajax({
      dataType: "json",
      url: url,
      timeout: 2000,
      type: "GET",
      success: function success($recom_data) {
        //recom_data = JSON.parse($recom_data);
        recom_data = $recom_data;
        var widgetInfo = "";
        $.each(recom_data, function(index, recom_item) {
          if (recom_item["widget_info"]) {
            widgetInfo = recom_item["widget_info"][0];
          } else if (recom_item["product_list"]) {
            product_list = recom_item["product_list"];

            if (product_list.length > 0) {
              var className = e.getAttribute("class");
              var classNameArr = className.split(" ");
              className = classNameArr[1];
              console.log(classNameArr);
              console.log(className);

              if ("class-main" === className) {
                mkClassMain(product_list, e, widgetInfo);
              } else if ("class-detail" === className) {
                mkClassDetail(product_list, e, widgetInfo);
              } else if ("class-detail2" === className) {
                mkClassDetail(product_list, e, widgetInfo);
              } else if ("audio-main" === className) {
                mkAudioMain(product_list, e, widgetInfo);
              } else if ("my" === className) {
                console.log(className);
                mypageMain(product_list, e, widgetInfo);
              } else if ("mypage-bottom" === className) {
                console.log(className);
                mypageMainBottom(product_list, e, widgetInfo);
              } else if ("audio-detail" === className) {
                mkAudioDetail(product_list, e, widgetInfo);
              } else if ("audio-detail2" === className) {
                mkAudioDetail(product_list, e, widgetInfo);
              }
            } else {
            }
          }
        });
      },
      error: function error(request, status, _error3) {
        // 오류가 발생했을 때 호출된다.
        console.log(
          "code:" +
            request.status +
            "\n" +
            "message:" +
            request.responseText +
            "\n" +
            "error:" +
            _error3
        );
      }
    });
  });
}

function mkClassDetail(product_list, e, widgetInfo) {
  var bodyString = "";
  var slideItem = "";
  var replaceImg = function replaceImg(url) {
    return url;
  };

  $.each(product_list, function(index, product_item) {
    slideItem += '<div class="w-detail-chart__content-container" content_id='
      .concat(product_item.content_id, " link=/video/detail?courseId=")
      .concat(product_item.content_id, " algorithm=")
      .concat(widgetInfo.algorithm, " path=")
      .concat(widgetInfo.path_name, " widget_id=")
      .concat(widgetInfo.widget_id, " popup=")
      .concat(widgetInfo.isProdBlank, " tracking_url=")
      .concat(
        widgetInfo.tracking_url,
        '>\n   <div class="w-detail-chart__content" style="display:flex">\n      <div class="w-detail-chart__thumbnail cursor--pointer" style="background-image:url(\''
      )
      .concat(
        replaceImg(product_item.teacher_img),
        '\'), url(&#39;https://static.welaaa.co.kr/static/courses/default/default_list.jpg&#39;);">\n     </div>\n     <div class="w-detail-chart__info"><a href="/video/detail?courseId='+product_item.content_id+'">\n         <p class="w-detail-chart__title"><span>'
      )
      .concat(
        product_item.name,
        ' </span></p>\n       </a>\n       <div class="w-detail-chart__icon-box">\n         <div class="w-detail-chart__icon"><img src="https://www.welaaa.com/static/images/ic-detail-view.png" class="w-detail-chart__icon-view"><span class="w-detail-chart__icon-text">'
      )
      .concat(
        product_item.playcnt,
        ' </span></div>\n         <div class="w-detail-chart__icon"><img src="https://www.welaaa.com/static/images/ic-detail-star.png" class="w-detail-chart__icon-star"><span class="w-detail-chart__icon-text">'
      )
      .concat(
        product_item.staravg,
        '</span></div>\n         <div class="w-detail-chart__icon"><img src="https://www.welaaa.com/static/images/ic-detail-message.png" class="w-detail-chart__icon-comment"><span class="w-detail-chart__icon-text">'
      )
      .concat(
        product_item.reviewcnt,
        "</span></div>\n       </div>\n     </div>\n   </div>\n </div>"
      );
  });
  bodyString = '<div>'.concat(
    slideItem,
    '\n         <div class="w-page__view-more w-flex" onClick="moreBtn();"><button class="w-page__view-more-btn"><span>\uB354\uBCF4\uAE30</span><img src="/static/images/ic-angle-down-grey.png" class="w-page__view-more-btn-icon"></button></div>\n         </div>'
  );

  if (product_list.length < widgetInfo.display_num) {
    widgetInfo.scroll_option = false;
  }

  $(e).html(bodyString); //   slideClickEvent(); // 생성된 슬라이드 엘리먼트에 클릭이벤트 추가

  var i = 0;
  detailClickEvent(); // 생성된 슬라이드 엘리먼트에 클릭이벤트 추가
}

function mkAudioDetail(product_list, e, widgetInfo) {
  var bodyString = "";
  var slideItem = "";
  $.each(product_list, function(index, product_item) {
    slideItem += '<div class="w-detail-chart__content-container" content_id='
      .concat(product_item.content_id, "  link=/audio/detail?audioId=")
      .concat(product_item.content_id, " algorithm=")
      .concat(widgetInfo.algorithm, " path=")
      .concat(widgetInfo.path_name, " widget_id=")
      .concat(widgetInfo.widget_id, " popup=")
      .concat(widgetInfo.isProdBlank, " tracking_url=")
      .concat(
        widgetInfo.tracking_url,
        '>\n   <div class="w-detail-chart__content" style="display:flex">\n     <div class="w-detail-chart__thumbnail cursor--pointer" style="background-image:url(\''
      )
      .concat(
        product_item.photo_url,
        '\')">\n     </div>\n     <div class="w-detail-chart__info"><a href="/audio/detail?audioId='+product_item.content_id+'">\n         <p class="w-detail-chart__title"><span>'
      )
      .concat(
        product_item.name,
        ' </span></p>\n       </a>\n       <div class="w-detail-chart__icon-box">\n         <div class="w-detail-chart__icon"><img src="https://www.welaaa.com/static/images/ic-detail-view.png" class="w-detail-chart__icon-view"><span class="w-detail-chart__icon-text">'
      )
      .concat(
        product_item.playcnt,
        ' </span></div>\n         <div class="w-detail-chart__icon"><img src="https://www.welaaa.com/static/images/ic-detail-star.png" class="w-detail-chart__icon-star"><span class="w-detail-chart__icon-text">'
      )
      .concat(
        product_item.staravg,
        '</span></div>\n         <div class="w-detail-chart__icon"><img src="https://www.welaaa.com/static/images/ic-detail-message.png" class="w-detail-chart__icon-comment"><span class="w-detail-chart__icon-text">'
      )
      .concat(
        product_item.reviewcnt,
        "</span></div>\n       </div>\n     </div>\n   </div>\n </div>"
      );
  });
  bodyString =
    "<div>\n         ".concat(
      slideItem,
      '\n         <div class="w-page__view-more w-flex" onClick="moreBtn();"><button class="w-page__view-more-btn"><span>\uB354\uBCF4\uAE30</span><img src="/static/images/ic-angle-down-grey.png" class="w-page__view-more-btn-icon"></button></div></div>'
    );

  if (product_list.length < widgetInfo.display_num) {
    widgetInfo.scroll_option = false;
  }

  $(e).html(bodyString); //   slideClickEvent(); // 생성된 슬라이드 엘리먼트에 클릭이벤트 추가


  var i = 0;
  detailClickEvent(); // 생성된 슬라이드 엘리먼트에 클릭이벤트 추가
}

function moreBtn() {
  var visible = $("#dhw > div > div:nth-child(6)").is(":visible");

  if (!visible) { // 더보기
    $("#dhw div.w-page__view-more.w-flex img").attr("src","/static/images/ic-angle-up-grey.png");
    $("#dhw div.w-page__view-more.w-flex span").text("접기");
    $("#dhw >  div > div:nth-child(n + 6)").show();
  } else { // 접기
    $("#dhw div.w-page__view-more.w-flex span").text("더보기");
    $("#dhw div.w-page__view-more.w-flex img").attr("src","/static/images/ic-angle-down-grey.png");
   
    $("#dhw > div > div:nth-child(n + 6):not(.w-page__view-more)").hide();
  }
}

function mkClassMain(product_list, e, widgetInfo) {
  var bodyString = "";
  var slideItem = "";
  var displayPlayCnt = function displayPlayCnt(playcnt) {
    var cnt = playcnt;

    if (cnt >= 1000) {
      cnt = Number(playcnt) / 1000;
      cnt = Math.floor(cnt) + "k";
    }

    return cnt;
  };

  $.each(product_list, function(index, product_item) {
    slideItem += '<div class="swiper-slide w-main-class__item" style=""\n   content_id='
      .concat(product_item.content_id, " link=/video/detail?courseId=")
      .concat(product_item.content_id, " algorithm=")
      .concat(widgetInfo.algorithm, " path=")
      .concat(widgetInfo.path_name, " widget_id=")
      .concat(widgetInfo.widget_id, " popup=")
      .concat(widgetInfo.isProdBlank, " tracking_url=")
      .concat(
        widgetInfo.tracking_url,
        '>\n   <div class="w-lecture">\n     <div class="w-summary">\n       <div class="w-summary__thumbnail cursor--pointer"\n         style="background-image:url('
      )
      .concat(
        product_item.photo_url.split(",")[0],
        ')">\n         <a href="/video/detail?courseId='+product_item.content_id+'">\n           <p class="w-summary__thumbnail-title"><span>'
      )
      .concat(
        product_item.name,
        '</span></p>\n         </a></div>\n       <div class="w-summary__btn-group">\n         <div class="w-flex"><img src="/static/images/icons/eye.png" alt=""\n             class="w-summary__btn-set-sm"><span class="w-summary__count-text">\uC7AC\uC0DD\uC218</span><img\n             src="/static/images/icons/star.png" alt="" class="w-summary__btn-set-sm"><span\n             class="w-summary__count-text">\uBCC4\uC810</span><img\n             src="/static/images/icons/commenting.png" alt=""\n             class="w-summary__btn-set-sm"><span class="w-summary__count-text">\uB9AC\uBDF0</span>\n         </div>\n       </div>\n     </div>\n     <div class="w-lecture__body"><a href="/video/detail?courseId='+product_item.content_id+'">\n         <p class="w-lecture__headline"><span>'
      )
      .concat(
        product_item.headline,
        '</span></p>\n       </a>\n       <p class="w-lecture__teacher-info"><span>'+(product_item.teacherhead === null?'':product_item.teacherhead)  +'</span><span> '
      )
      .concat(
        product_item.teachername,
        '</span></p>\n       <hr class="w-lecture__hr">\n       <div class="w-btn-group">\n         <div class="w-flex-between">\n           <div class="w-flex"><img src="/static/images/icons/ic-play-count-black.png" alt=""\n               class="w-btn-group__btn-sm"><span class="w-btn-group__count">'
      )
      .concat(
        displayPlayCnt(product_item.playcnt),
        '</span><img\n               src="/static/images/icons/ic-star-black.png" alt=""\n               class="w-btn-group__btn-sm"><span class="w-btn-group__count">'
      )
      .concat(
        product_item.staravg,
        '</span><img\n               src="/static/images/icons/ic-comment.png" alt=""\n               class="w-btn-group__btn-sm"><span class="w-btn-group__count">'
      )
      .concat(
        product_item.reviewcnt,
        '</span></div>\n           <div class="w-flex"><img src="/static/images/icons/ic-clip-count.png" alt=""\n               class="w-btn-group__btn-sm"><span class="w-btn-group__count-clip">'
      )
      .concat(
        product_item.contentscnt,
        "\n               <!-- -->\uAC1C\uC758 \uAC15\uC758</span></div>\n         </div>\n       </div>\n     </div>\n   </div>\n </div>"
      );
  });
  bodyString = '<div class="w-main-class">\n      <div class="datahere swiper-container swiper-container-initialized swiper-container-horizontal">\n         <div class="swiper-wrapper" style="">\n            '
    .concat(
      slideItem,
      '\n         </div>\n  <div class="swiper-pagination"></div>       <span class="swiper-notification" aria-live="assertive" aria-atomic="true">\n         </span>\n      </div>\n      </div>\n      </div>\n      </div>'
    );

  if (product_list.length < widgetInfo.display_num) {
    widgetInfo.scroll_option = false;
  }

  $(e).html(bodyString);
  
  var swiper = new Swiper(".datahere.swiper-container", {
    slidesPerView: 3,
    slidesPerGroup:3,
    spaceBetween: 10,
    loop: false,
    pagination: ".swiper-pagination",
    breakpoints: {
      1024: {
        slidesPerView: 2.2,
        slidesPerGroup: 2,
          spaceBetween: 10
      },
      480: {
        slidesPerView: 1.2,
        slidesPerGroup: 1,
        spaceBetween: 10
      }
    }
  }); //   slideClickEvent(); // 생성된 슬라이드 엘리먼트에 클릭이벤트 추가

  var i = 0;
  slideClickEvent(); // 생성된 슬라이드 엘리먼트에 클릭이벤트 추가
}

function mypageMain(product_list, e, widgetInfo) {
  var bodyString = "";
  var slideItem = "";
  $.each(product_list, function(index, product_item) {
    slideItem += '<div class="swiper-slide w-main-continue__grid-item swiper-slide"\n   style="width: 250px; margin-right: 10px;"\n   content_id='
      .concat(product_item.content_id, " link=/video/detail?courseId=")
      .concat(product_item.content_id, " algorithm=")
      .concat(widgetInfo.algorithm, " path=")
      .concat(widgetInfo.path_name, " widget_id=")
      .concat(widgetInfo.widget_id, " popup=")
      .concat(widgetInfo.isProdBlank, " tracking_url=")
      .concat(
        widgetInfo.tracking_url,
        '>\n   \n   <div class="w-summary cursor--pointer">\n     <div class="w-summary__thumbnail"\n       style="background-image: url(&quot;'
      )
      .concat(
        product_item.photo_url,
        '&quot;);">\n       <p class="w-summary__thumbnail-title">'
      )
      .concat(
        product_item.name,
        '</p><img\n         src="/static/images/icons/ic-play-gray.png" alt=""\n         class="w-main-continue__play-image">\n     </div>\n   </div>\n </div>'
      );
  });
  bodyString = 
      '<div class="w-mypage__content">\n        <div class="w-main-continue__swiper">\n            <div class="datahere swiper-container swiper-container-initialized swiper-container-horizontal">\n                <div class="swiper-wrapper" style="transform: translate3d(0px, 0px, 0px);">\n'
    .concat(
      slideItem,
      '\n           </div>\n           <div class="swiper-pagination"></div>\n           <span class="swiper-notification"\n                    aria-live="assertive" aria-atomic="true"></span>\n      </div>\n        </div>'
    );

  if (product_list.length < widgetInfo.display_num) {
    widgetInfo.scroll_option = false;
  }

  $(e).html(bodyString);
  var mySwiper = new Swiper("#dhw-top .datahere.swiper-container", {
    slidesPerView: 4,
    slidesPerGroup:4,
    spaceBetween: 10,
    pagination: "#dhw-top .swiper-pagination",
    loop: false,
    breakpoints: {
      1024: {
        slidesPerView: 4,
        slidesPerGroup:4,
        spaceBetween: 10
      },
      768: {
        slidesPerView: 3.5,
        slidesPerGroup:3,
        spaceBetween: 10
      },
      480: {
        slidesPerView: 1.5,
        slidesPerGroup:1,
        spaceBetween: 10
      }
    }
  });
  console.log(mySwiper);
  console.log(mySwiper.params.slidesPerView); //   slideClickEvent(); // 생성된 슬라이드 엘리먼트에 클릭이벤트 추가

  var i = 0;
  slideClickEvent(); // 생성된 슬라이드 엘리먼트에 클릭이벤트 추가
}

function mypageMainBottom(product_list, e, widgetInfo) {
  // 실시간 맞춤 오디오북
  var bodyString = "";
  var slideItem = "";
  $.each(product_list, function(index, product_item) {
    slideItem += '<div class="swiper-slide w-audio__audio-book-content-item swiper-slide-active"  content_id='
      .concat(product_item.content_id, " link=/audio/detail?audioId=")
      .concat(product_item.content_id, " algorithm=")
      .concat(widgetInfo.algorithm, " path=")
      .concat(widgetInfo.path_name, " widget_id=")
      .concat(widgetInfo.widget_id, " popup=")
      .concat(widgetInfo.isProdBlank, " tracking_url=")
      .concat(
        widgetInfo.tracking_url,
        '\n                    style="width: 198px; margin-right: 10px;"><a href="/audio/detail?audioId=1625">\n                        <div class="w-new-book">\n                            <div class="w-new-book__thumbnail-wrap">\n                                <div class="w-new-book__thumbnail"\n                                    style="background-image: url(&quot;'
      )
      .concat(
        product_item.photo_url,
        '&quot;);">\n                                </div>\n                            </div>\n                            <p class="w-new-book__subtitle"><span>'
      )
      .concat(
        product_item.name,
        "</span></p>\n                        </div>\n                    </a></div>"
      );
  });
  bodyString = '<div>\n        <div class="datahere swiper-container swiper-container-initialized swiper-container-horizontal">\n            <div class="swiper-wrapper">\n                      '
    .concat(
      slideItem,
      "\n            </div>\n      <div class='swiper-pagination'></div>    </div>\n    </div>"
    );

  if (product_list.length < widgetInfo.display_num) {
    widgetInfo.scroll_option = false;
  }

  $(e).html(bodyString);
  var swiper = new Swiper("#dhw-bottom .datahere.swiper-container", {
    slidesPerView: 5,
    slidesPerGroup:5,
    spaceBetween: 10,
    pagination:"#dhw-bottom .swiper-pagination",
    loop: false,
    breakpoints: {
      1024: {
        slidesPerView: 4.2,
        slidesPerGroup:4,
        spaceBetween: 10
      },
      768: {
        slidesPerView: 3.2,
        slidesPerGroup:3,
        spaceBetween: 10
      },
      640: {
        slidesPerView: 2.5,
        slidesPerGroup:2,
        spaceBetween: 10
      },
      402: {
        slidesPerView: 2.4,
        slidesPerGroup:2,
        spaceBetween: 10
      }
    }
  }); //   slideClickEvent(); // 생성된 슬라이드 엘리먼트에 클릭이벤트 추가

  var i = 0;
  slideClickEvent(); // 생성된 슬라이드 엘리먼트에 클릭이벤트 추가
}

function mkAudioMain(product_list, e, widgetInfo) {
  var bodyString = "";
  var slideItem = "";
  var msg = widgetInfo.path_expression;
    if(getName()){
        msg = getName().length > 4?getName()+'님, <br> 이 오디오북 어때요?':getName()+'님, 이 오디오북 어때요?';
    }
  $.each(product_list, function(index, product_item) {
    slideItem += '<div class="swiper-slide w-main-class__item" style=""\n   content_id='
      .concat(product_item.content_id, " link=/audio/detail?audioId=")
      .concat(product_item.content_id, " algorithm=")
      .concat(widgetInfo.algorithm, " path=")
      .concat(widgetInfo.path_name, " widget_id=")
      .concat(widgetInfo.widget_id, " popup=")
      .concat(widgetInfo.isProdBlank, " tracking_url=")
      .concat(
        widgetInfo.tracking_url,
        '>\n   <div class="w-new-book cursor--pointer">\n     <div class="w-new-book__thumbnail-wrap">\n       <div class="w-new-book__thumbnail" style="background-image:url(\''
      )
      .concat(
        product_item.photo_url,
        '\')">\n       </div>\n     </div>\n     <p class="w-new-book__subtitle"><span>'
      )
      .concat(product_item.name, "</span></p>\n   </div>\n </a></div>");
  });
  bodyString = 
      '<div class="datahere swiper-container swiper-container-initialized swiper-container-horizontal">\n            <div class="swiper-wrapper">\n               '
    .concat(
      slideItem,
      "\n          </div>\n  <div class='swiper-pagination'></div>    </div>"
    );

  if (product_list.length < widgetInfo.display_num) {
    widgetInfo.scroll_option = false;
  }

  $(e).html(bodyString);
  var swiper = new Swiper(".datahere.swiper-container", {
    slidesPerView: 6,
    slidesPerGroup:6,
    spaceBetween: 10,
    loop: false,
    pagination:".swiper-pagination",
    breakpoints: {
      1024: {
        slidesPerView: 4.2,
        slidesPerGroup:4,
        spaceBetween: 10
      },
      768: {
        slidesPerView: 3.2,
        slidesPerGroup:3,
        spaceBetween: 10
      },
      640: {
        slidesPerView: 2.5,
        slidesPerGroup:2,
        spaceBetween: 10
      },
      402: {
        slidesPerView: 2.2,
        slidesPerGroup:2,
          spaceBetween: 10
        }
      }
  }); //   slideClickEvent(); // 생성된 슬라이드 엘리먼트에 클릭이벤트 추가

  var i = 0;
  slideClickEvent(); // 생성된 슬라이드 엘리먼트에 클릭이벤트 추가
}

function comma(price) {
  price += "";
  return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

function pushUrlToNextRouter(url){
  window.next && next.router.push(url);
}

function detailClickEvent() {
  //console.log("클릭이벤트 메서드");
  var nodeList = document.querySelectorAll(
    ".dataheretable .w-detail-chart__content-container"
  ); //console.log(nodeList);

  for (var i = 0; i < nodeList.length; i++) {
    var element = nodeList.item(i);
    element.addEventListener("click", function(e) {
      e.preventDefault();
      var link = $(this).attr("link");
      var content_id = $(this).attr("content_id");
      var widget_id = $(this).attr("widget_id");
      var popup = $(this).attr("popup");
      var algorithm = $(this).attr("algorithm");
      var path = $(this).attr("path");
      var tracking_url = $(this).attr("tracking_url");
      var member_id = "";
      member_id = getMemberId(); //console.log("popup : " + popup);

      url =
        tracking_url +
        "?mode=click&content_id=" +
        content_id +
        "&widget_id=" +
        widgetId +
        "&algorithm=" +
        algorithm +
        "&path=" +
        path +
        "&member_id=" +
        member_id;
      console.log(url);
      $.ajax({
        //url = "/datahere/tracking?product_id=" + product_id + "&widget_id=" + widgetId + "&algorithm=" + algorithm + "&path=" + path;
        dataType: "json",
        url: url,
        timeout: 2000,
        type: "GET",
        success: function success(data) {
          localStorage.setItem("dh_content_id", content_id);
          pushUrlToNextRouter(link); //                if (popup == "true") {
        },
        error: function error(request, status, _error4) {
          // 오류가 발생했을 때 호출된다.
          localStorage.setItem("dh_content_id", content_id);
          pushUrlToNextRouter(link); //                if (popup == "true") {

          console.log(
            "code:" +
              request.status +
              "\n" +
              "message:" +
              request.responseText +
              "\n" +
              "error:" +
              _error4
          );
        }
      });
    });
  }
}

function slideClickEvent() {
  //console.log("클릭이벤트 메서드");
  var nodeList = document.querySelectorAll(".dataheretable .swiper-slide"); //console.log(nodeList);

  for (var i = 0; i < nodeList.length; i++) {
    var element = nodeList.item(i);
    element.addEventListener("click", function(e) {
      e.preventDefault();
      var link = $(this).attr("link");
      var content_id = $(this).attr("content_id");
      var widget_id = $(this).attr("widget_id");
      var popup = $(this).attr("popup");
      var algorithm = $(this).attr("algorithm");
      var path = $(this).attr("path");
      var tracking_url = $(this).attr("tracking_url");
      var member_id = "";
      member_id = getMemberId(); //console.log("popup : " + popup);

      url =
        tracking_url +
        "?mode=click&content_id=" +
        content_id +
        "&widget_id=" +
        widgetId +
        "&algorithm=" +
        algorithm +
        "&path=" +
        path +
        "&member_id=" +
        member_id;
      console.log(url);
      $.ajax({
        //url = "/datahere/tracking?product_id=" + product_id + "&widget_id=" + widgetId + "&algorithm=" + algorithm + "&path=" + path;
        dataType: "json",
        url: url,
        timeout: 2000,
        type: "GET",
        success: function success(data) {
          localStorage.setItem("dh_content_id", content_id);
          pushUrlToNextRouter(link); 
        },
        error: function error(request, status, _error5) {
          // 오류가 발생했을 때 호출된다.
          localStorage.setItem("dh_content_id", content_id);
          pushUrlToNextRouter(link); 

          console.log(
            "code:" +
              request.status +
              "\n" +
              "message:" +
              request.responseText +
              "\n" +
              "error:" +
              _error5
          );
        }
      });
    });
  }
}

function getMemberId() {
  var memberData = JSON.parse(decodeURIComponent(getCookie("userInfo")));
  console.log(memberData);
  var trackingUrl = "https://welaaa.cloudhere.net/insert";

  if (!memberData) {
    if (localStorage.hasOwnProperty("dh_user_id")) {
      member_id = localStorage.getItem("dh_user_id");

      if (!member_id) {
        member_id =
          "nm_" +
          (Math.floor(Math.random() * (9999999999 - 1000000000)) + 1000000000);
        url = trackingUrl + "?mode=member&member_id=" + member_id;
        putMemberId(member_id, url);
      }
    } else {
      member_id =
        "nm_" +
        (Math.floor(Math.random() * (9999999999 - 1000000000)) + 1000000000);
      url = trackingUrl + "?mode=member&member_id=" + member_id;
      putMemberId(member_id, url);
    }
  } else {
    member_id = memberData.id;
  }

  console.log(member_id);
  return member_id;
}

function getName() {
  var memberData = JSON.parse(decodeURIComponent(getCookie("userInfo")));
 
  var trackingUrl = "https://welaaa.cloudhere.net/insert";
  var name = null;
  if(memberData){
    name = memberData.name;
  }
  
  return name;
}

function putMemberId(member_id, url) {
  localStorage.setItem("dh_user_id", member_id);
  $.ajax({
    dataType: "json",
    url: url,
    timeout: 2000,
    type: "GET",
    success: function success(data) {
      console.log("putMemberId : " + member_id);
      localStorage.setItem("dh_user_id", member_id);
    },
    error: function error(request, status, _error6) {
      // 오류가 발생했을 때 호출된다.
      console.log(
        "putMemberId Error code:" +
          request.status +
          "\n" +
          "message:" +
          request.responseText +
          "\n" +
          "error:" +
          _error6
      );

      if (request.responseText == "success") {
        localStorage.setItem("dh_user_id", member_id);
      }
    }
  });
}

function getSearchParameters() {
  var prmstr = window.location.search.substr(1);
  return prmstr != null && prmstr != "" ? transformToAssocArray(prmstr) : {};
}

function transformToAssocArray(prmstr) {
  var params = {};
  var prmarr = prmstr.split("&");

  for (var i = 0; i < prmarr.length; i++) {
    var tmparr = prmarr[i].split("=");
    params[tmparr[0]] = tmparr[1];
  }

  return params;
}

function transformToJsonTypeString(prm, typePrm) {
  var changeValue = "";
  var params = prm;
  params = params.replace("{", "");
  params = params.replace("}", "");
  params = params.split(",");

  for (var i = 0; i < params.length; i++) {
    if (params[i].includes(typePrm)) {
      var tempValue = params[i].split(":");
      changeValue = tempValue[1].replace("'", "");
      changeValue = changeValue.replace("'", "");
    }
  }

  return changeValue;
}

function getCookie(name) {
  var value = document.cookie.match("(^|;) ?" + name + "=([^;]*)(;|$)");
  return value ? value[2] : null;
}
        </script>
    </head>
<body>

</body>
</html>